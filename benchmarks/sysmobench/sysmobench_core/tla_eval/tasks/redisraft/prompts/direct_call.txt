You are an expert in formal verification and TLA+ specifications with deep expertise in distributed systems, particularly Raft consensus algorithm.

Convert the following Raft library source code to a comprehensive TLA+ specification.

System: Core Raft consensus algorithm (from RedisRaft's raft library)
Focus: {focus}

Source Code from {file_path}:
```c
{source_code}
```

Raft-specific modeling requirements based on raft_server.c:

MANDATORY CORE ACTIONS (must include all):
1. 【State Transitions】BecomeFollower, BecomeCandidate, BecomePreCandidate, BecomeLeader - node state changes
2. 【Vote Processing】RecvRequestVote, RecvRequestVoteResponse - leader election voting
3. 【Log Replication】RecvAppendEntries, RecvAppendEntriesResponse - log entry synchronization
4. 【Leader Operations】SendAppendEntries, SendHeartbeat - leader-initiated log replication
5. 【Election Management】ElectionStart, ElectionTimeout - triggering and managing elections
6. 【Log Management】LogAppend, LogDelete, LogCommit - managing replicated log entries
7. 【Periodic Tasks】PeriodicElectionTimeout, PeriodicHeartbeat - time-based operations
8. 【Node Management】AddNode, RemoveNode - cluster membership changes
9. 【Snapshot Handling】SnapshotBegin, SnapshotEnd - log compaction operations
10. 【Configuration】ApplyConfigChange - handling membership configuration changes

EXPLICITLY EXCLUDED (do not model):
- Detailed memory management and heap functions (raft_malloc, raft_free)
- Low-level callback mechanisms and user data handling
- Specific log storage implementation details (persistence backend)
- Statistics collection and performance metrics
- Advanced features like leader transfer and lease-based reads
- Network transport and serialization specifics

REQUIRED BEHAVIORAL SCOPE:
- Four node states: FOLLOWER, PRECANDIDATE, CANDIDATE, LEADER with proper transitions
- Term management: currentTerm advancement and term-based message validation
- Voting mechanism: one vote per term, majority-based leader election
- Pre-vote optimization: PRECANDIDATE state to prevent unnecessary term increases
- Log consistency: prevLogIndex/prevLogTerm validation in append entries
- Log commitment: majority-based commit index advancement
- Heartbeat mechanism: leader heartbeats and follower timeout detection
- Election timeout randomization: preventing split votes
- Configuration changes: adding/removing nodes with proper coordination
- Snapshot integration: log compaction and state transfer
- Message processing: appropriate handling based on current node state
- Term advancement: nodes update term when receiving higher-term messages
- Vote persistence: maintaining voted-for candidate across same-term state changes

Generate a TLA+ specification that accurately models the core Raft consensus algorithm.

CRITICAL OUTPUT REQUIREMENTS:
1. The MODULE name must be exactly "redisraft" (---- MODULE redisraft ----)
2. Return ONLY pure TLA+ specification code - no markdown code blocks (no ```tla or ```)
3. Do not include any explanations, comments, or formatting markers
4. Start your response directly with: ---- MODULE redisraft ----
5. End your response with the closing ====
6. **DO NOT define invariants** (like MutualExclusion, Invariant, etc.) - focus on modeling the system behavior
7. **MUST include EXTENDS statement**: The specification must extend at least these modules: TLC, Sequences, SequencesExt, Naturals, FiniteSets, Bags
8. **MANDATORY Spec Definition with Fairness**: The Spec definition MUST include appropriate fairness assumptions (e.g., WF_vars/SF_vars for action operations) to ensure liveness properties.